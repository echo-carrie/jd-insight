var fe=Object.defineProperty;var he=(P,o,n)=>o in P?fe(P,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):P[o]=n;var N=(P,o,n)=>he(P,typeof o!="symbol"?o+"":o,n);import{d as ke,r as c,b as be,w as we,e as Ae,c as d,o as u,f as t,g as m,a as Be,h as x,v as h,n as A,t as g,F as I,i as K,j as Re,k as Le,l as Fe}from"./kT_ujkwN.js";const F=class F{constructor(){N(this,"settings",null)}static getInstance(){return F.instance||(F.instance=new F),F.instance}getDefaultSettings(){return{apiProvider:"openai",apiKey:"",apiBaseUrl:"",model:"gpt-4-turbo-preview",temperature:.3,maxTokens:2e3,topP:1,systemPrompt:"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„äº§å“ç»ç†JDåˆ†æä¸“å®¶ï¼Œæ“…é•¿æå–JDä¸­çš„å…³é”®ä¿¡æ¯å¹¶è¿›è¡Œç»“æ„åŒ–è¾“å‡ºã€‚",userPromptTemplate:`ä½œä¸ºä¸€ä¸ªä¸“ä¸šçš„äº§å“ç»ç†JDåˆ†æä¸“å®¶ï¼Œè¯·åˆ†æä»¥ä¸‹äº§å“ç»ç†å²—ä½JDï¼Œæå–ä¸‰ä¸ªå…³é”®ç»´åº¦çš„ä¿¡æ¯ï¼š

1. æ ¸å¿ƒèƒ½åŠ›è¦æ±‚ï¼ˆ3-5æ¡ï¼‰ï¼šæå–å²—ä½æ‰€éœ€çš„å…³é”®èƒ½åŠ›å’ŒæŠ€èƒ½
2. å²—ä½æ¡ä»¶éœ€æ±‚ï¼šæ€»ç»“å­¦å†ã€ç»éªŒã€å¿…å¤‡æŠ€èƒ½ç­‰èµ„æ ¼æ¡ä»¶  
3. æ ¸å¿ƒäº§å‡ºç‰©ï¼šæå–å²—ä½éœ€è¦å®Œæˆçš„ä¸»è¦æ–‡æ¡£ã€æŠ¥å‘Šæˆ–æˆæœ

{position ? \`å²—ä½ç±»å‹ï¼š{position}\\n\` : ''}
JDå†…å®¹ï¼š
{jdText}

è¯·ä»¥JSONæ ¼å¼è¿”å›åˆ†æç»“æœï¼ŒåŒ…å«ä¸‰ä¸ªæ•°ç»„å­—æ®µï¼šcoreAbilitiesã€requirementsã€deliverablesã€‚æ¯ä¸ªæ•°ç»„åŒ…å«å¯¹åº”ç»´åº¦çš„å…·ä½“æ¡ç›®ã€‚`,encryptStorage:!0,autoClean:!1}}encrypt(o){if(typeof window>"u")return o;try{return btoa(unescape(encodeURIComponent(o)))}catch(n){return console.error("åŠ å¯†å¤±è´¥:",n),o}}decrypt(o){if(typeof window>"u")return o;try{return decodeURIComponent(escape(atob(o)))}catch(n){return console.error("è§£å¯†å¤±è´¥:",n),o}}getSettings(){if(this.settings)return this.settings;if(typeof window>"u")return this.getDefaultSettings();try{const o=localStorage.getItem("ai_settings");if(o){const n=JSON.parse(o);n.encryptStorage&&n.apiKey&&(n.apiKey=this.decrypt(n.apiKey)),this.settings={...this.getDefaultSettings(),...n}}else this.settings=this.getDefaultSettings()}catch(o){console.error("åŠ è½½é…ç½®å¤±è´¥:",o),this.settings=this.getDefaultSettings()}return this.settings}saveSettings(o){if(!(typeof window>"u"))try{const n={...o};n.encryptStorage&&n.apiKey&&(n.apiKey=this.encrypt(n.apiKey)),localStorage.setItem("ai_settings",JSON.stringify(n)),this.settings=o,o.autoClean&&this.setupAutoClean()}catch(n){throw console.error("ä¿å­˜é…ç½®å¤±è´¥:",n),new Error("ä¿å­˜é…ç½®å¤±è´¥")}}setupAutoClean(){if(typeof window>"u")return;const o=()=>{try{const n=this.getSettings();if(n.autoClean){const l={...n};l.apiKey="",localStorage.setItem("ai_settings",JSON.stringify(l))}}catch(n){console.error("è‡ªåŠ¨æ¸…é™¤å¤±è´¥:",n)}};window.addEventListener("beforeunload",o),window.addEventListener("pagehide",o)}getAPIConfig(){const o=this.getSettings(),n={openai:{baseURL:"https://api.openai.com/v1",defaultModel:"gpt-4-turbo-preview"},anthropic:{baseURL:"https://api.anthropic.com/v1",defaultModel:"claude-3-sonnet-20240229"},moonshot:{baseURL:"https://api.moonshot.cn/v1",defaultModel:"moonshot-v1-8k"},zhipu:{baseURL:"https://open.bigmodel.cn/api/paas/v4",defaultModel:"glm-4"},custom:{baseURL:o.apiBaseUrl,defaultModel:o.model}},l=n[o.apiProvider]||n.openai;return{apiKey:o.apiKey,baseURL:l.baseURL,model:o.model||l.defaultModel,temperature:o.temperature,maxTokens:o.maxTokens,topP:o.topP}}buildPrompt(o,n){const l=this.getSettings();let p=l.userPromptTemplate;return p=p.replace("{jdText}",o),p=p.replace("{position}",n||""),n?p=p.replace(/\{position \? \\`([^`]+)\\` : ''\}/g,"$1"):p=p.replace(/\{position \? \\`[^`]+\\` : ''\}/g,""),{system:l.systemPrompt,user:p}}clearAllData(){typeof window<"u"&&localStorage.removeItem("ai_settings"),this.settings=null}validateSettings(){const o=this.getSettings(),n=[];return o.apiKey||n.push("APIå¯†é’¥ä¸èƒ½ä¸ºç©º"),o.model||n.push("æ¨¡å‹åç§°ä¸èƒ½ä¸ºç©º"),(o.temperature<0||o.temperature>2)&&n.push("Temperature å€¼åº”åœ¨ 0-2 ä¹‹é—´"),(o.maxTokens<1||o.maxTokens>1e4)&&n.push("æœ€å¤§è¾“å‡ºé•¿åº¦åº”åœ¨ 1-10000 ä¹‹é—´"),(o.topP<0||o.topP>1)&&n.push("Top-p å€¼åº”åœ¨ 0-1 ä¹‹é—´"),o.systemPrompt.trim()||n.push("ç³»ç»Ÿæç¤ºè¯ä¸èƒ½ä¸ºç©º"),o.userPromptTemplate.trim()||n.push("ç”¨æˆ·æç¤ºè¯æ¨¡æ¿ä¸èƒ½ä¸ºç©º"),o.apiProvider==="custom"&&!o.apiBaseUrl&&n.push("è‡ªå®šä¹‰APIæä¾›å•†éœ€è¦è®¾ç½®åŸºç¡€URL"),{isValid:n.length===0,errors:n}}};N(F,"instance");let G=F;const L=G.getInstance(),Pe={class:"flex flex-col h-screen bg-[#FAFAFA] dark:bg-[#0F0F0F]"},Ue={class:"flex-1 flex flex-col overflow-hidden"},Me={key:0,class:"flex-1 flex flex-col"},Ce={class:"flex-1 flex items-center justify-center p-8"},Ie={class:"max-w-2xl w-full mx-auto space-y-12"},Ke={class:"w-full space-y-6"},_e={class:"relative"},Se=["disabled"],je={class:"absolute bottom-3 right-3 flex items-center space-x-2 text-sm text-gray-400"},ze={class:"flex items-center justify-between"},De={class:"flex items-center space-x-3"},Te=["disabled"],Ve={key:0,class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},Ee={key:0,class:"mt-4 p-4 bg-white dark:bg-[#1A1A1A] border border-gray-200 dark:border-gray-800 rounded-xl"},Je={class:"flex items-center justify-between"},Oe={class:"flex items-center space-x-3"},$e={class:"w-10 h-10 flex-shrink-0 rounded-lg bg-gray-100 dark:bg-gray-800 flex items-center justify-center"},Ne={key:0,class:"w-6 h-6 text-[#FF6B6B]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ge={key:1,class:"w-6 h-6 text-[#FF6B6B]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},He={class:"text-sm font-medium text-gray-900 dark:text-white"},qe={class:"text-xs text-gray-500 dark:text-gray-400"},We={key:0,class:"mt-4"},Qe=["src"],Xe={key:1,class:"flex-1 overflow-y-auto px-4 py-8 md:px-8"},Ye={class:"max-w-4xl mx-auto space-y-8"},Ze={class:"space-y-4"},et={class:"bg-white dark:bg-[#1A1A1A] border border-gray-200 dark:border-gray-800 rounded-xl p-4 space-y-2"},tt={class:"text-sm"},st={class:"space-y-4"},at={class:"bg-white dark:bg-[#1A1A1A] border border-gray-200 dark:border-gray-800 rounded-xl p-4 space-y-2"},ot={class:"text-sm"},rt={class:"space-y-4"},nt={class:"bg-white dark:bg-[#1A1A1A] border border-gray-200 dark:border-gray-800 rounded-xl p-4 space-y-2"},lt={class:"text-sm"},it={class:"flex items-center justify-center space-x-4 pt-4"},dt=["disabled"],ut=["disabled"],pt={class:"bg-white dark:bg-[#1A1A1A] rounded-2xl shadow-xl max-w-lg w-full mx-4 overflow-hidden"},ct={class:"px-6 py-4 space-y-4"},gt={class:"space-y-2"},vt={class:"grid grid-cols-2 gap-2"},yt=["onClick"],mt={class:"space-y-2"},xt={class:"relative"},ft=["type"],ht={class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},kt={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},bt={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},wt={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},At={class:"space-y-2"},Bt={class:"relative"},Rt={class:"mt-2 flex flex-wrap gap-2"},Lt=["onClick"],Ft={class:"space-y-2"},Pt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Ut={class:"space-y-2"},Mt={class:"flex items-center justify-between"},Ct={key:0,class:"mt-4 space-y-4"},It={class:"space-y-2"},Kt={class:"grid grid-cols-2 gap-2"},_t=["onClick"],St={key:0,class:"mt-4 space-y-4"},jt={class:"space-y-2"},zt={class:"space-y-2"},Dt={class:"space-y-2"},Tt={class:"space-y-2"},Vt={class:"space-y-2"},Et={class:"space-y-2"},Jt={class:"space-y-2"},Ot=["disabled"],$t={key:0,class:"animate-spin w-4 h-4",fill:"none",viewBox:"0 0 24 24"},Nt={class:"px-6 py-4 border-t border-gray-200 dark:border-gray-800 flex justify-between"},Gt={class:"flex space-x-3"},Wt=ke({__name:"index",setup(P){const o=c(""),n=c(""),l=c(null),p=c(!1),k=c(null),b=c(null),U=c(),T=c(),H=c(),q=c(),w=c(""),_=c(!1),S=c(!1),j=c(!1),v=c(null),r=c({apiProvider:"openai",apiKey:"",model:"gpt-4-turbo-preview",temperature:.3,enableImageRecognition:!1,imageRecognitionModel:"moonshot-v1-8k",moonshotApiKey:"",moonshotBaseURL:"",zhipuApiKey:"",zhipuBaseURL:"",aliyunApiKey:"",aliyunBaseURL:""}),W=[{value:"openai",name:"OpenAI",icon:"ğŸ¤–"},{value:"anthropic",name:"Anthropic",icon:"ğŸ­"},{value:"moonshot",name:"Moonshot",icon:"ğŸŒ™"},{value:"zhipu",name:"æ™ºè°±AI",icon:"ğŸ§ "},{value:"custom",name:"è‡ªå®šä¹‰",icon:"âš™ï¸"}],oe=[{value:"gpt-4-turbo-preview",label:"GPT-4 Turbo"},{value:"gpt-4",label:"GPT-4"},{value:"gpt-3.5-turbo",label:"GPT-3.5 Turbo"},{value:"claude-3-sonnet-20240229",label:"Claude 3 Sonnet"},{value:"moonshot-v1-8k",label:"Moonshot v1"},{value:"glm-4",label:"GLM-4"}],Q=[{value:"moonshot-v1-8k",label:"Moonshot V1",provider:"moonshot"},{value:"moonshot-v1-32k",label:"Moonshot V1-32K",provider:"moonshot"},{value:"glm-4v",label:"GLM-4V",provider:"zhipu"},{value:"qwen-vl-plus",label:"Qwen VL+",provider:"aliyun"}],re={senior:{text:`é«˜çº§äº§å“ç»ç†
å²—ä½èŒè´£ï¼š
1. è´Ÿè´£å…¬å¸æ ¸å¿ƒäº§å“çš„è§„åˆ’ã€è®¾è®¡å’Œä¼˜åŒ–ï¼Œåˆ¶å®šäº§å“å‘å±•æˆ˜ç•¥
2. æ·±å…¥äº†è§£ç”¨æˆ·éœ€æ±‚ï¼Œé€šè¿‡æ•°æ®åˆ†æå’Œç”¨æˆ·è°ƒç ”é©±åŠ¨äº§å“è¿­ä»£
3. åè°ƒæŠ€æœ¯ã€è®¾è®¡ã€è¿è¥ç­‰è·¨éƒ¨é—¨å›¢é˜Ÿï¼Œæ¨è¿›äº§å“æŒ‰æ—¶ä¸Šçº¿
4. å»ºç«‹å®Œå–„çš„äº§å“æ•°æ®ä½“ç³»ï¼ŒæŒç»­è·Ÿè¸ªäº§å“æ•ˆæœå¹¶ä¼˜åŒ–
5. ç®¡ç†äº§å“å…¨ç”Ÿå‘½å‘¨æœŸï¼Œä»éœ€æ±‚åˆ†æåˆ°äº§å“å‘å¸ƒçš„å…¨æµç¨‹æŠŠæ§

ä»»èŒè¦æ±‚ï¼š
1. æœ¬ç§‘åŠä»¥ä¸Šå­¦å†ï¼Œè®¡ç®—æœºã€äº’è”ç½‘ç›¸å…³ä¸“ä¸šä¼˜å…ˆ
2. 5å¹´ä»¥ä¸Šäº’è”ç½‘äº§å“ç»éªŒï¼Œæœ‰è¿‡0-1æˆ–1-10äº§å“ç»å†
3. å…·å¤‡ä¼˜ç§€çš„é€»è¾‘æ€ç»´èƒ½åŠ›å’Œæ•°æ®åˆ†æèƒ½åŠ›
4. ç†Ÿç»ƒä½¿ç”¨Axureã€Figmaç­‰äº§å“è®¾è®¡å·¥å…·
5. æœ‰è¿‡Bç«¯æˆ–Cç«¯äº§å“æˆåŠŸæ¡ˆä¾‹ï¼Œæœ‰å›¢é˜Ÿç®¡ç†ç»éªŒä¼˜å…ˆ`,position:"é«˜çº§PM"},strategy:{text:`ç­–ç•¥äº§å“ç»ç†
å²—ä½èŒè´£ï¼š
1. è´Ÿè´£æ¨èç®—æ³•ã€æœç´¢ç®—æ³•ç­‰ç­–ç•¥äº§å“çš„è®¾è®¡å’Œä¼˜åŒ–
2. é€šè¿‡A/Bæµ‹è¯•å’Œæ•°æ®æŒ–æ˜ï¼ŒæŒç»­ä¼˜åŒ–ç”¨æˆ·ä½“éªŒå’Œä¸šåŠ¡æŒ‡æ ‡
3. ä¸ç®—æ³•å·¥ç¨‹å¸ˆç´§å¯†åˆä½œï¼Œå°†ä¸šåŠ¡éœ€æ±‚è½¬åŒ–ä¸ºæŠ€æœ¯æ–¹æ¡ˆ
4. å»ºç«‹ç­–ç•¥æ•ˆæœè¯„ä¼°ä½“ç³»ï¼Œå®šæœŸå›é¡¾å’Œä¼˜åŒ–ç­–ç•¥æ•ˆæœ
5. å…³æ³¨è¡Œä¸šè¶‹åŠ¿ï¼Œæ¢ç´¢æ–°çš„ç­–ç•¥æ–¹å‘å’ŒæŠ€æœ¯åº”ç”¨

ä»»èŒè¦æ±‚ï¼š
1. ç¡•å£«åŠä»¥ä¸Šå­¦å†ï¼Œè®¡ç®—æœºã€æ•°å­¦ã€ç»Ÿè®¡å­¦ç­‰ç›¸å…³ä¸“ä¸š
2. 3å¹´ä»¥ä¸Šç­–ç•¥äº§å“æˆ–ç®—æ³•äº§å“ç»éªŒ
3. å…·å¤‡å¼ºå¤§çš„æ•°æ®åˆ†æèƒ½åŠ›ï¼Œç†Ÿç»ƒä½¿ç”¨SQLã€Pythonç­‰å·¥å…·
4. äº†è§£æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ ç­‰ç›¸å…³æŠ€æœ¯åŸç†
5. æœ‰æ¨èç³»ç»Ÿã€æœç´¢å¼•æ“ã€å¹¿å‘Šç³»ç»Ÿç­‰ç›¸å…³ç»éªŒä¼˜å…ˆ`,position:"ç­–ç•¥PM"}},ne=a=>{if(a===0)return"0 Bytes";const e=1024,s=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(a)/Math.log(e));return parseFloat((a/Math.pow(e,i)).toFixed(2))+" "+s[i]},X=()=>{try{const a=L.getSettings();r.value={apiProvider:a.apiProvider,apiKey:a.apiKey,model:a.model,temperature:a.temperature,enableImageRecognition:a.enableImageRecognition??!1,imageRecognitionModel:a.imageRecognitionModel??"moonshot-v1-8k",moonshotApiKey:a.moonshotApiKey,moonshotBaseURL:a.moonshotBaseURL,zhipuApiKey:a.zhipuApiKey,zhipuBaseURL:a.zhipuBaseURL,aliyunApiKey:a.aliyunApiKey,aliyunBaseURL:a.aliyunBaseURL}}catch(a){console.error("åŠ è½½AIè®¾ç½®å¤±è´¥:",a)}},le=()=>{try{const e={...L.getSettings(),apiProvider:r.value.apiProvider,apiKey:r.value.apiKey,model:r.value.model,temperature:r.value.temperature,enableImageRecognition:r.value.enableImageRecognition,imageRecognitionModel:r.value.imageRecognitionModel,moonshotApiKey:r.value.moonshotApiKey,moonshotBaseURL:r.value.moonshotBaseURL,zhipuApiKey:r.value.zhipuApiKey,zhipuBaseURL:r.value.zhipuBaseURL,aliyunApiKey:r.value.aliyunApiKey,aliyunBaseURL:r.value.aliyunBaseURL};L.saveSettings(e),_.value=!1,v.value=null,alert("è®¾ç½®å·²ä¿å­˜")}catch(a){console.error("ä¿å­˜è®¾ç½®å¤±è´¥:",a),alert("ä¿å­˜å¤±è´¥ï¼Œè¯·é‡è¯•")}},ie=()=>{confirm("ç¡®å®šè¦é‡ç½®ä¸ºé»˜è®¤è®¾ç½®å—ï¼Ÿ")&&(r.value={apiProvider:"openai",apiKey:"",model:"gpt-4-turbo-preview",temperature:.3,enableImageRecognition:!1,imageRecognitionModel:"moonshot-v1-8k",moonshotApiKey:"",moonshotBaseURL:"",zhipuApiKey:"",zhipuBaseURL:"",aliyunApiKey:"",aliyunBaseURL:""},v.value=null)},de=()=>{v.value=null},Y=()=>{var a;(a=T.value)==null||a.click()},ue=()=>{var a;(a=l.value)!=null&&a.type.startsWith("image/")&&w.value&&(URL.revokeObjectURL(w.value),w.value=""),l.value=null,T.value&&(T.value.value="")},Z=a=>{const e=a.target;if(e.files&&e.files[0]){const s=e.files[0];if(s.size>5*1024*1024){alert("æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡5MB");return}if(s.type==="application/pdf"||s.type.startsWith("image/"))l.value=s,s.type.startsWith("image/")&&(w.value=URL.createObjectURL(s));else{alert("åªæ”¯æŒPDFå’Œå›¾ç‰‡æ–‡ä»¶(JPG, PNG, JPEGç­‰)");return}}},ee=async a=>{var s;const e=(s=a.clipboardData)==null?void 0:s.items;if(e){for(let i=0;i<e.length;i++)if(e[i].type.indexOf("image")!==-1){a.preventDefault();const y=e[i].getAsFile();if(!y)continue;if(y.size>5*1024*1024){alert("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡5MB");return}l.value=y,alert('å·²ç²˜è´´å›¾ç‰‡ï¼Œç‚¹å‡»"å¼€å§‹åˆ†æ"æŒ‰é’®è¿›è¡Œåˆ†æ')}}},pe=()=>{var a;(a=H.value)==null||a.click()},ce=()=>{var a;(a=q.value)==null||a.click()},te=a=>{var s;a.preventDefault();const e=(s=a.dataTransfer)==null?void 0:s.files;if(e&&e[0]){const i=e[0];if(i.size>5*1024*1024){alert("æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡5MB");return}if(i.type==="application/pdf"||i.type.startsWith("image/"))l.value=i,i.type.startsWith("image/")&&(w.value=URL.createObjectURL(i));else{alert("åªæ”¯æŒPDFå’Œå›¾ç‰‡æ–‡ä»¶(JPG, PNG, JPEGç­‰)");return}}},se=a=>{a.preventDefault()},ge=async()=>{if(!r.value.apiKey.trim()){v.value={success:!1,message:"è¯·å…ˆè¾“å…¥ API å¯†é’¥"};return}try{j.value=!0,v.value=null;const a=await fetch("/api/v1/test-connection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiProvider:r.value.apiProvider,apiKey:r.value.apiKey,model:r.value.model||"gpt-3.5-turbo"})}),e=await a.json();a.ok&&e.success?v.value={success:!0,message:`âœ… è¿æ¥æˆåŠŸï¼
æ¨¡å‹ï¼š${e.model||r.value.model}
å“åº”æ—¶é—´ï¼š${e.responseTime||"N/A"}ms`}:v.value={success:!1,message:`âŒ è¿æ¥å¤±è´¥
${e.message||"æœªçŸ¥é”™è¯¯"}`}}catch(a){console.error("è¿é€šæ€§æµ‹è¯•é”™è¯¯:",a),v.value={success:!1,message:`âŒ æµ‹è¯•å¤±è´¥
ç½‘ç»œé”™è¯¯æˆ–æœåŠ¡ä¸å¯ç”¨`}}finally{j.value=!1}},ve=()=>{var s;const a=(s=Q.find(i=>i.value===r.value.imageRecognitionModel))==null?void 0:s.provider;if(!a)return null;const e=L.getSettings();switch(a){case"moonshot":return{apiKey:e.moonshotApiKey||e.apiKey,baseURL:e.moonshotBaseURL||"https://api.moonshot.cn/v1",model:r.value.imageRecognitionModel};case"zhipu":return{apiKey:e.zhipuApiKey,baseURL:e.zhipuBaseURL||"https://open.bigmodel.cn/api/paas/v4",model:r.value.imageRecognitionModel};case"aliyun":return{apiKey:e.aliyunApiKey,baseURL:e.aliyunBaseURL,model:r.value.imageRecognitionModel};default:return null}},V=a=>{const e=re[a];o.value=e.text,n.value=e.position,Fe(()=>{var s;(s=U.value)==null||s.focus()})},E=()=>{k.value=null,b.value=null,o.value="",n.value="",l.value=null},B=()=>{X(),_.value=!0},ye=async()=>{var a;try{if(p.value=!0,b.value=null,!o.value&&!l.value){alert("è¯·è¾“å…¥JDæ–‡æœ¬æˆ–ä¸Šä¼ æ–‡ä»¶");return}const e=L.validateSettings();if(!e.isValid){const f=e.errors.join(`
`);confirm(`é…ç½®éªŒè¯å¤±è´¥ï¼š
${f}

æ˜¯å¦æ‰“å¼€è®¾ç½®è¿›è¡Œé…ç½®ï¼Ÿ`)&&B();return}const s=L.getAPIConfig(),i=L.buildPrompt(o.value,n.value),y=new FormData;if(l.value&&l.value.type.startsWith("image/")){if(!r.value.enableImageRecognition){alert("è¯·å…ˆåœ¨è®¾ç½®ä¸­å¯ç”¨å›¾ç‰‡è¯†åˆ«åŠŸèƒ½"),p.value=!1;return}const f=ve();if(!f){alert("å›¾ç‰‡è¯†åˆ«é…ç½®æ— æ•ˆï¼Œè¯·æ£€æŸ¥è®¾ç½®"),p.value=!1;return}if(!f.apiKey){confirm("æœªé…ç½®å›¾ç‰‡è¯†åˆ«æ‰€éœ€çš„APIå¯†é’¥ï¼Œæ˜¯å¦å‰å¾€è®¾ç½®ï¼Ÿ")&&B(),p.value=!1;return}try{const M=await new Promise(($,xe)=>{const D=new FileReader;D.onload=()=>$(D.result),D.onerror=xe,D.readAsDataURL(l.value)}),O={request:{model:f.model,messages:[{role:"user",content:[{type:"text",text:"è¯·å¸®æˆ‘æå–è¿™å¼ å›¾ç‰‡ä¸­çš„JDæ–‡æœ¬å†…å®¹ï¼Œåªéœ€è¦è¿”å›æå–çš„æ–‡æœ¬ï¼Œä¸éœ€è¦ä»»ä½•åˆ†æã€‚"},{type:"image_url",image_url:{url:M}}]}]},apiKey:f.apiKey,baseURL:f.baseURL},C=await fetch("/api/v1/image-recognition",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(O)});if(!C.ok){const $=await C.json().catch(()=>({}));if(C.status===401){confirm("å›¾ç‰‡è¯†åˆ«APIå¯†é’¥æ— æ•ˆæˆ–å·²è¿‡æœŸï¼Œæ˜¯å¦å‰å¾€è®¾ç½®ï¼Ÿ")&&B();return}throw new Error($.message||"å›¾ç‰‡å¤„ç†å¤±è´¥")}const z=await C.json();if(z.success&&z.text)o.value=z.text,y.append("jdText",z.text);else throw new Error(z.message||"å›¾ç‰‡å¤„ç†å¤±è´¥")}catch(M){console.error("å›¾ç‰‡å¤„ç†é”™è¯¯:",M),alert("å›¾ç‰‡å¤„ç†å¤±è´¥ï¼Œè¯·å°è¯•æ‰‹åŠ¨è¾“å…¥æ–‡æœ¬æˆ–ä¸Šä¼ PDFæ–‡ä»¶"),p.value=!1;return}}else o.value&&y.append("jdText",o.value),l.value&&y.append("file",l.value);n.value&&y.append("position",n.value);const me={apiKey:s.apiKey,baseURL:s.baseURL,model:s.model,temperature:s.temperature,maxTokens:s.maxTokens,topP:s.topP,systemPrompt:i.system,userPrompt:i.user};y.append("aiConfig",JSON.stringify(me));const R=await fetch("/api/v1/analyze",{method:"POST",body:y});if(!R.ok){const f=await R.json().catch(()=>({}));if(R.status===401){const M=r.value.apiProvider||"openai",O=((a=W.find(C=>C.value===M))==null?void 0:a.name)||M;alert(`âŒ API è®¤è¯å¤±è´¥ (401)

å¯èƒ½çš„åŸå› ï¼š
â€¢ API å¯†é’¥é”™è¯¯æˆ–è¿‡æœŸ
â€¢ å½“å‰é€‰æ‹©çš„æä¾›å•†ï¼š${O}
â€¢ è¯·æ£€æŸ¥å¯†é’¥æ˜¯å¦ä¸æä¾›å•†åŒ¹é…

å»ºè®®ï¼š
â€¢ é‡æ–°å¤åˆ¶ç²˜è´´ API å¯†é’¥
â€¢ ç¡®è®¤é€‰æ‹©äº†æ­£ç¡®çš„ AI æœåŠ¡æä¾›å•†
â€¢ æ£€æŸ¥è´¦æˆ·ä½™é¢å’Œæƒé™`),B();return}else if(R.status===429){alert(`âŒ API è¯·æ±‚é¢‘ç‡é™åˆ¶ (429)

è¯·ç¨åå†è¯•æˆ–æ£€æŸ¥æ‚¨çš„ API å¥—é¤é™åˆ¶ã€‚`);return}else if(R.status>=500){alert(`âŒ æœåŠ¡å™¨é”™è¯¯

æœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åé‡è¯•ã€‚`);return}throw new Error(f.message||`è¯·æ±‚å¤±è´¥ (${R.status})`)}const J=await R.json();if(J.success)k.value=J.data;else throw new Error(J.message||"åˆ†æå¤±è´¥")}catch(e){console.error("åˆ†æå‡ºé”™:",e),e instanceof Error?e.message.includes("401")||e.message.includes("authentication")?(alert(`ğŸ”‘ API è®¤è¯é—®é¢˜

è¯·æ£€æŸ¥æ‚¨çš„ API å¯†é’¥è®¾ç½®ï¼Œç‚¹å‡»å·¦ä¾§è®¾ç½®æŒ‰é’®è¿›è¡Œé…ç½®ã€‚`),B()):e.message.includes("network")||e.message.includes("fetch")?alert(`ğŸŒ ç½‘ç»œè¿æ¥é—®é¢˜

è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥å¹¶é‡è¯•ã€‚`):alert(`âŒ åˆ†æå¤±è´¥

é”™è¯¯ä¿¡æ¯ï¼š${e.message}`):alert("âŒ åˆ†æå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{p.value=!1}},ae=async a=>{if(k.value)try{if(b.value=a,!(await fetch("/api/v1/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requestId:k.value.requestId,rating:a})})).ok)throw new Error("æäº¤åé¦ˆå¤±è´¥")}catch(e){console.error("æäº¤åé¦ˆå‡ºé”™:",e),b.value=null}};return be(()=>{var e;X(),window.addEventListener("open-settings",B),window.addEventListener("new-analysis",E),window.addEventListener("select-sample",s=>{V(s.detail.type)}),window.addEventListener("trigger-file-upload",Y),(e=U.value)==null||e.addEventListener("paste",ee);const a=U.value;a&&(a.addEventListener("dragover",se),a.addEventListener("drop",te))}),we(r,()=>{de()},{deep:!0}),Ae(()=>{var e;window.removeEventListener("open-settings",B),window.removeEventListener("new-analysis",E),window.removeEventListener("select-sample",s=>{V(s.detail.type)}),window.removeEventListener("trigger-file-upload",Y),(e=U.value)==null||e.removeEventListener("paste",ee);const a=U.value;a&&(a.removeEventListener("dragover",se),a.removeEventListener("drop",te)),w.value&&URL.revokeObjectURL(w.value)}),(a,e)=>(u(),d("div",Pe,[t("div",Ue,[k.value?(u(),d("div",Xe,[t("div",Ye,[t("div",{class:"flex items-center justify-between"},[e[28]||(e[28]=t("h2",{class:"text-xl font-medium text-gray-900 dark:text-white"},"åˆ†æç»“æœ",-1)),t("button",{onClick:E,class:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800/50 rounded-lg transition-colors"},e[27]||(e[27]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})],-1),t("span",null,"é‡æ–°åˆ†æ",-1)]))]),t("div",Ze,[e[30]||(e[30]=t("h3",{class:"text-base font-medium text-gray-700 dark:text-gray-300"},"æ ¸å¿ƒèƒ½åŠ›è¦æ±‚",-1)),t("div",et,[(u(!0),d(I,null,K(k.value.coreAbilities,(s,i)=>(u(),d("div",{key:i,class:"flex items-start space-x-3 text-gray-600 dark:text-gray-400"},[e[29]||(e[29]=t("svg",{class:"w-4 h-4 mt-1 text-[#FF6B6B] flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",tt,g(s),1)]))),128))])]),t("div",st,[e[32]||(e[32]=t("h3",{class:"text-base font-medium text-gray-700 dark:text-gray-300"},"å²—ä½è¦æ±‚",-1)),t("div",at,[(u(!0),d(I,null,K(k.value.requirements,(s,i)=>(u(),d("div",{key:i,class:"flex items-start space-x-3 text-gray-600 dark:text-gray-400"},[e[31]||(e[31]=t("svg",{class:"w-4 h-4 mt-1 text-[#FF6B6B] flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",ot,g(s),1)]))),128))])]),t("div",rt,[e[34]||(e[34]=t("h3",{class:"text-base font-medium text-gray-700 dark:text-gray-300"},"æ ¸å¿ƒäº§å‡ºç‰©",-1)),t("div",nt,[(u(!0),d(I,null,K(k.value.deliverables,(s,i)=>(u(),d("div",{key:i,class:"flex items-start space-x-3 text-gray-600 dark:text-gray-400"},[e[33]||(e[33]=t("svg",{class:"w-4 h-4 mt-1 text-[#FF6B6B] flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",lt,g(s),1)]))),128))])]),t("div",it,[t("button",{onClick:e[3]||(e[3]=s=>ae("like")),disabled:b.value!==null,class:A(["flex items-center space-x-2 px-4 py-2 rounded-lg text-sm transition-colors",b.value==="like"?"bg-green-50 dark:bg-green-500/10 text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800/50"])},e[35]||(e[35]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21h-4.017c-.163 0-.326-.02-.485-.06L7 20m7-10V5a2 2 0 00-2-2h-.095c-.5 0-.905.405-.905.905 0 .714-.211 1.412-.608 2.006L7 11v9m7-10h-2M7 20H5a2 2 0 01-2-2v-6a2 2 0 012-2h2.5"})],-1),t("span",null,"æœ‰å¸®åŠ©",-1)]),10,dt),t("button",{onClick:e[4]||(e[4]=s=>ae("dislike")),disabled:b.value!==null,class:A(["flex items-center space-x-2 px-4 py-2 rounded-lg text-sm transition-colors",b.value==="dislike"?"bg-red-50 dark:bg-red-500/10 text-red-600 dark:text-red-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800/50"])},e[36]||(e[36]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M10 14H5.236a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.736 3h4.018c.163 0 .326.02.485.06L17 4m-7 10v2a2 2 0 002 2h.095c.5 0 .905-.405.905-.905 0-.714.211-1.412.608-2.006L17 13V4m-7 10h2"})],-1),t("span",null,"éœ€æ”¹è¿›",-1)]),10,ut)])])])):(u(),d("div",Me,[t("div",Ce,[t("div",Ie,[e[26]||(e[26]=Be('<div class="text-center space-y-4"><div class="w-14 h-14 rounded-full bg-[#FF6B6B] dark:bg-[#FF6B6B]/90 mx-auto flex items-center justify-center"><svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><div><h1 class="text-2xl font-medium text-gray-900 dark:text-white">æ¬¢è¿ä½¿ç”¨ JD Insight</h1><p class="text-gray-500 dark:text-gray-400 mt-2 text-base">åŸºäº AI çš„äº§å“ç»ç†å²—ä½æ™ºèƒ½è§£æå·¥å…·</p></div></div>',1)),t("div",Ke,[t("div",_e,[x(t("textarea",{ref_key:"textareaRef",ref:U,"onUpdate:modelValue":e[0]||(e[0]=s=>o.value=s),placeholder:"åœ¨è¿™é‡Œç²˜è´´ JD æ–‡æœ¬...",class:"w-full h-[200px] px-4 py-3 bg-white dark:bg-[#1A1A1A] border border-gray-200 dark:border-gray-800 rounded-xl resize-none focus:outline-none focus:ring-2 focus:ring-[#FF6B6B]/20 dark:focus:ring-[#FF6B6B]/10 text-gray-700 dark:text-gray-300 placeholder-gray-400 dark:placeholder-gray-600 transition-all",disabled:p.value},null,8,Se),[[h,o.value]]),t("div",je,[o.value?(u(),d("button",{key:0,onClick:e[1]||(e[1]=s=>o.value=""),class:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors"},e[18]||(e[18]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M6 18L18 6M6 6l12 12"})],-1)]))):m("",!0)])]),t("div",ze,[t("div",De,[t("button",{onClick:pe,class:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800/50 rounded-lg transition-colors"},e[19]||(e[19]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),t("span",null,"ä¸Šä¼  PDF",-1)])),t("button",{onClick:ce,class:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800/50 rounded-lg transition-colors"},e[20]||(e[20]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),t("span",null,"ä¸Šä¼ å›¾ç‰‡",-1)])),t("button",{onClick:e[2]||(e[2]=s=>V("senior")),class:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800/50 rounded-lg transition-colors"},e[21]||(e[21]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),t("span",null,"ä½¿ç”¨ç¤ºä¾‹",-1)]))]),t("button",{onClick:ye,disabled:p.value||!o.value.trim()&&!l.value,class:A(["flex items-center space-x-2 px-6 py-2 rounded-xl text-sm font-medium transition-all duration-200",p.value||!o.value.trim()&&!l.value?"bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-600 cursor-not-allowed":"bg-[#FF6B6B] hover:bg-[#FF6B6B]/90 text-white"])},[p.value?(u(),d("svg",Ve,e[22]||(e[22]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"3"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):m("",!0),t("span",null,g(p.value?"åˆ†æä¸­...":"å¼€å§‹åˆ†æ"),1)],10,Te)]),l.value?(u(),d("div",Ee,[t("div",Je,[t("div",Oe,[t("div",$e,[l.value.type==="application/pdf"?(u(),d("svg",Ne,e[23]||(e[23]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1)]))):(u(),d("svg",Ge,e[24]||(e[24]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])))]),t("div",null,[t("div",He,g(l.value.name),1),t("div",qe,g(ne(l.value.size)),1)])]),t("button",{onClick:ue,class:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800/50 transition-colors"},e[25]||(e[25]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),l.value.type.startsWith("image/")?(u(),d("div",We,[t("img",{src:w.value,alt:"é¢„è§ˆå›¾ç‰‡",class:"max-h-48 rounded-lg object-contain mx-auto"},null,8,Qe)])):m("",!0)])):m("",!0)])])])])),_.value?(u(),d("div",{key:2,class:"fixed inset-0 bg-black/50 dark:bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center",onClick:e[17]||(e[17]=Re(s=>_.value=!1,["self"]))},[t("div",pt,[e[48]||(e[48]=t("div",{class:"px-6 py-4 border-b border-gray-200 dark:border-gray-800"},[t("h3",{class:"text-lg font-medium text-gray-900 dark:text-white"},"AI æ¨¡å‹è®¾ç½®")],-1)),t("div",ct,[t("div",gt,[e[37]||(e[37]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"API æä¾›å•†",-1)),t("div",vt,[(u(),d(I,null,K(W,s=>t("button",{key:s.value,onClick:i=>r.value.apiProvider=s.value,class:A(["flex items-center space-x-2 px-4 py-2 rounded-lg text-sm transition-colors",r.value.apiProvider===s.value?"bg-[#FF6B6B]/10 dark:bg-[#FF6B6B]/5 text-[#FF6B6B]":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800/50"])},[t("span",null,g(s.icon),1),t("span",null,g(s.name),1)],10,yt)),64))])]),t("div",mt,[e[38]||(e[38]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"API å¯†é’¥",-1)),t("div",xt,[x(t("input",{type:S.value?"text":"password","onUpdate:modelValue":e[5]||(e[5]=s=>r.value.apiKey=s),placeholder:"è¾“å…¥ API å¯†é’¥",class:"w-full px-4 py-2 bg-white dark:bg-[#1A1A1A] border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-700 dark:text-gray-300 placeholder-gray-400 dark:placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-[#FF6B6B]/20 dark:focus:ring-[#FF6B6B]/10 transition-all"},null,8,ft),[[Le,r.value.apiKey]]),t("button",{onClick:e[6]||(e[6]=s=>S.value=!S.value),class:"absolute right-2 top-1/2 -translate-y-1/2 p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"},[(u(),d("svg",ht,[S.value?(u(),d("path",kt)):m("",!0),S.value?(u(),d("path",bt)):(u(),d("path",wt))]))])])]),t("div",At,[e[39]||(e[39]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"æ¨¡å‹é€‰æ‹©",-1)),t("div",Bt,[x(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>r.value.model=s),type:"text",placeholder:"è¾“å…¥æ¨¡å‹åç§°ï¼Œå¦‚ï¼šgpt-4-turbo-preview",class:"w-full px-4 py-2 bg-white dark:bg-[#1A1A1A] border border-gray-200 dark:border-gray-800 rounded-lg text-sm text-gray-700 dark:text-gray-300 focus:outline-none focus:ring-2 focus:ring-[#FF6B6B]/20 dark:focus:ring-[#FF6B6B]/10 transition-all"},null,512),[[h,r.value.model]]),t("div",Rt,[(u(),d(I,null,K(oe,s=>t("button",{key:s.value,type:"button",onClick:i=>r.value.model=s.value,class:"px-2 py-1 text-xs rounded-md bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"},g(s.label),9,Lt)),64))])])]),t("div",Ft,[t("label",Pt," æ¸©åº¦ï¼ˆåˆ›é€ æ€§ï¼‰ï¼š"+g(r.value.temperature.toFixed(1)),1),x(t("input",{type:"range","onUpdate:modelValue":e[8]||(e[8]=s=>r.value.temperature=s),min:"0",max:"1",step:"0.1",class:"w-full"},null,512),[[h,r.value.temperature]]),e[40]||(e[40]=t("div",{class:"flex justify-between text-xs text-gray-500 dark:text-gray-400"},[t("span",null,"ç²¾ç¡®"),t("span",null,"åˆ›é€ ")],-1))]),t("div",Ut,[t("div",Mt,[e[41]||(e[41]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"å›¾ç‰‡è¯†åˆ«",-1)),t("button",{onClick:e[9]||(e[9]=s=>r.value.enableImageRecognition=!r.value.enableImageRecognition),class:A(["relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none",r.value.enableImageRecognition?"bg-[#FF6B6B]":"bg-gray-200 dark:bg-gray-700"])},[t("span",{class:A(["pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out",r.value.enableImageRecognition?"translate-x-5":"translate-x-0"])},null,2)],2)]),r.value.enableImageRecognition?(u(),d("div",Ct,[t("div",It,[e[42]||(e[42]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"è¯†åˆ«æ¨¡å‹",-1)),t("div",Kt,[(u(),d(I,null,K(Q,s=>t("button",{key:s.value,onClick:i=>r.value.imageRecognitionModel=s.value,class:A(["flex items-center space-x-2 px-4 py-2 rounded-lg text-sm transition-colors",r.value.imageRecognitionModel===s.value?"bg-[#FF6B6B]/10 dark:bg-[#FF6B6B]/5 text-[#FF6B6B]":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800/50"])},[t("span",null,g(s.label),1)],10,_t)),64))]),e[43]||(e[43]=t("p",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," å¯ç”¨åå¯ä»¥ç›´æ¥ä¸Šä¼ æˆ–æ‹–æ”¾å›¾ç‰‡è¿›è¡ŒJDåˆ†æã€‚ç›®å‰æ”¯æŒMoonshotã€æ™ºè°±AIç­‰å¤šä¸ªæ¨¡å‹ã€‚ ",-1))])])):m("",!0)]),r.value.enableImageRecognition?(u(),d("div",St,[t("div",jt,[e[44]||(e[44]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Moonshot APIé…ç½®",-1)),t("div",zt,[x(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>r.value.moonshotApiKey=s),type:"password",placeholder:"Moonshot API Keyï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨é€šç”¨Keyï¼‰",class:"w-full px-4 py-2 bg-white dark:bg-[#1A1A1A] border border-gray-200 dark:border-gray-800 rounded-lg text-sm"},null,512),[[h,r.value.moonshotApiKey]]),x(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>r.value.moonshotBaseURL=s),type:"text",placeholder:"API Base URLï¼ˆå¯é€‰ï¼‰",class:"w-full px-4 py-2 bg-white dark:bg-[#1A1A1A] border border-gray-200 dark:border-gray-800 rounded-lg text-sm"},null,512),[[h,r.value.moonshotBaseURL]])])]),t("div",Dt,[e[45]||(e[45]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"æ™ºè°±APIé…ç½®",-1)),t("div",Tt,[x(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>r.value.zhipuApiKey=s),type:"password",placeholder:"æ™ºè°± API Key",class:"w-full px-4 py-2 bg-white dark:bg-[#1A1A1A] border border-gray-200 dark:border-gray-800 rounded-lg text-sm"},null,512),[[h,r.value.zhipuApiKey]]),x(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>r.value.zhipuBaseURL=s),type:"text",placeholder:"API Base URLï¼ˆå¯é€‰ï¼‰",class:"w-full px-4 py-2 bg-white dark:bg-[#1A1A1A] border border-gray-200 dark:border-gray-800 rounded-lg text-sm"},null,512),[[h,r.value.zhipuBaseURL]])])]),t("div",Vt,[e[46]||(e[46]=t("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"é˜¿é‡Œäº‘APIé…ç½®",-1)),t("div",Et,[x(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>r.value.aliyunApiKey=s),type:"password",placeholder:"é˜¿é‡Œäº‘ API Key",class:"w-full px-4 py-2 bg-white dark:bg-[#1A1A1A] border border-gray-200 dark:border-gray-800 rounded-lg text-sm"},null,512),[[h,r.value.aliyunApiKey]]),x(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>r.value.aliyunBaseURL=s),type:"text",placeholder:"API Base URL",class:"w-full px-4 py-2 bg-white dark:bg-[#1A1A1A] border border-gray-200 dark:border-gray-800 rounded-lg text-sm"},null,512),[[h,r.value.aliyunBaseURL]])])])])):m("",!0),t("div",Jt,[t("button",{onClick:ge,disabled:j.value,class:"w-full flex items-center justify-center space-x-2 px-4 py-2 bg-[#FF6B6B]/10 dark:bg-[#FF6B6B]/5 hover:bg-[#FF6B6B]/20 dark:hover:bg-[#FF6B6B]/10 text-[#FF6B6B] rounded-lg text-sm font-medium transition-colors"},[j.value?(u(),d("svg",$t,e[47]||(e[47]=[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"3"},null,-1),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):m("",!0),t("span",null,g(j.value?"æµ‹è¯•ä¸­...":"æµ‹è¯•è¿æ¥"),1)],8,Ot),v.value?(u(),d("div",{key:0,class:A(["mt-2 p-3 rounded-lg text-sm whitespace-pre-line",v.value.success?"bg-green-50 dark:bg-green-500/10 text-green-600 dark:text-green-400":"bg-red-50 dark:bg-red-500/10 text-red-600 dark:text-red-400"])},g(v.value.message),3)):m("",!0)])]),t("div",Nt,[t("button",{onClick:ie,class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors"}," é‡ç½®é»˜è®¤ "),t("div",Gt,[t("button",{onClick:e[16]||(e[16]=s=>_.value=!1),class:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-800/50 rounded-lg transition-colors"}," å–æ¶ˆ "),t("button",{onClick:le,class:"px-4 py-2 bg-[#FF6B6B] hover:bg-[#FF6B6B]/90 text-white rounded-lg text-sm font-medium transition-colors"}," ä¿å­˜è®¾ç½® ")])])])])):m("",!0),t("input",{ref_key:"pdfInputRef",ref:H,type:"file",accept:".pdf",class:"hidden",onChange:Z},null,544),t("input",{ref_key:"imageInputRef",ref:q,type:"file",accept:"image/*",class:"hidden",onChange:Z},null,544)])]))}});export{Wt as default};
